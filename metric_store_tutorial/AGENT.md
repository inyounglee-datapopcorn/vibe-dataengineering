# 초보자를 위한 Metric Store 기초 프로젝트: 전사 매출 지표 통일하기 📊

이 프로젝트는 회사 내에서 부서마다 서로 다르게 계산하던 지표(Metric)를 하나로 통일하여, 누구나 똑같은 숫자를 보고 의사결정 할 수 있게 만드는 **Metric Store(또는 Semantic Layer)**의 개념을 실습합니다.

## 🎯 프로젝트 목표
**"누가 물어봐도 똑같은 '매출' 정의를 시스템에 등록하자!"**
1.  **지표 정의**: 코드(YAML)로 매출 계산 공식 작성하기
2.  **차원 연결**: 날짜별, 지역별로 필터링할 수 있는 기준 설정하기
3.  **단일 진실 공급원(SSOT)**: 어떤 도구로 봐도 숫자가 일치하는지 확인하기

---

## 🏗️ 1단계: 왜 Metric Store인가? (The Problem)
보통 회사는 이런 문제를 겪습니다.
*   **영업팀**: "우리 매출은 100억이에요!" (반품 포함)
*   **재무팀**: "아니요, 매출은 90억입니다." (반품 제외)
*   **데이터 분석가**: (매번 쿼리를 다르게 짜며 시간을 낭비함)

**Metric Store**는 이 로직을 데이터베이스가 아닌 **'코드 계층'**에서 관리하여 이 소모적인 싸움을 끝냅니다.

---

## 🧑‍💻 2단계: 지표 정의서 작성 (`models/metrics.yml`)
dbt Semantic Layer 스타일의 YAML 설정을 통해 지표를 코드로 정의해 봅니다.

```yaml
metrics:
  - name: total_revenue # 지표 이름
    label: "전체 매출"
    description: "반품이 제외된 최종 확정 매출액입니다."
    type: simple
    type_params:
      measure: order_amount # 미리 정의된 sum(amount)
    filter: |
      status = 'completed' # 여기서 핵심 로직(반품 제외)을 정의!

  - name: active_customers
    label: "활성 고객 수"
    type: count_distinct
    type_params:
      measure: customer_id
```

이렇게 정의해두면, SQL 쿼리에 직접 `status = 'completed'`를 적지 않아도 시스템이 알아서 계산해 줍니다.

---

## 🚀 3단계: 실습 과정
1.  **지표 기획**: 본인의 프로젝트에서 가장 중요한 숫자 하나를 정합니다. (예: 일일 사용자 수, 평균 결제 금액 등)
2.  **공식 문서화**: 해당 숫자를 계산하기 위해 어떤 테이블의 어떤 컬럼을 써야 하는지, 어떤 데이터는 제외해야 하는지 한 문장으로 적어봅니다.
3.  **YAML 이식**: 위 예시 코드를 참고하여 나만의 `metrics.yml` 파일을 작성합니다.
4.  **검증**: 이 파일을 Metric Store 도구(dbt, Cube.js, Looker 등)에 넣었을 때, 복잡한 JOIN 명령 없이도 "매출 보여줘" 한 마디에 정확한 숫자가 나오는지 상상해 봅니다.

---

## ✅ 완료 포인트
*   '매출'을 계산할 때 부서별로 생길 수 있는 오해를 코드로 해결했나요?
*   이제 SQL을 모르는 마케터도 "전체 매출"이라는 이름만으로 정확한 데이터를 가져올 수 있음을 이해했나요?

축하합니다! 여러분은 데이터의 기술적 관리를 넘어 **비즈니스의 정렬(Alignment)**을 책임지는 핵심 엔지니어링 역량을 맛보셨습니다. 🥂
